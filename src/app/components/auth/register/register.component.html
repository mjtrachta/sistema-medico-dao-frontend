<div class="register-container">
  <div class="register-card">
    <h2>Registro de Paciente</h2>
    <p class="subtitle">Complete sus datos para crear una cuenta</p>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <div class="form-group">
          <label for="nombre_usuario">Usuario *</label>
          <input
            type="text"
            id="nombre_usuario"
            formControlName="nombre_usuario"
            placeholder="Nombre de usuario"
            [class.error]="registerForm.get('nombre_usuario')?.invalid && registerForm.get('nombre_usuario')?.touched"
          />
          <div class="error-message" *ngIf="registerForm.get('nombre_usuario')?.invalid && registerForm.get('nombre_usuario')?.touched">
            <span *ngIf="registerForm.get('nombre_usuario')?.errors?.['required']">El usuario es requerido</span>
            <span *ngIf="registerForm.get('nombre_usuario')?.errors?.['minlength']">Mínimo 3 caracteres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email *</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="correo@ejemplo.com"
            [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
          />
          <div class="error-message" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
            <span *ngIf="registerForm.get('email')?.errors?.['required']">El email es requerido</span>
            <span *ngIf="registerForm.get('email')?.errors?.['email']">Email inválido</span>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="password">Contraseña *</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Mínimo 6 caracteres"
            [class.error]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
          />
          <div class="error-message" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
            <span *ngIf="registerForm.get('password')?.errors?.['required']">La contraseña es requerida</span>
            <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Mínimo 6 caracteres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirmar Contraseña *</label>
          <input
            type="password"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Repita la contraseña"
            [class.error]="passwordMismatch"
          />
          <div class="error-message" *ngIf="passwordMismatch">
            Las contraseñas no coinciden
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="nombre">Nombre *</label>
          <input
            type="text"
            id="nombre"
            formControlName="nombre"
            placeholder="Nombre"
            [class.error]="registerForm.get('nombre')?.invalid && registerForm.get('nombre')?.touched"
          />
          <div class="error-message" *ngIf="registerForm.get('nombre')?.invalid && registerForm.get('nombre')?.touched">
            El nombre es requerido
          </div>
        </div>

        <div class="form-group">
          <label for="apellido">Apellido *</label>
          <input
            type="text"
            id="apellido"
            formControlName="apellido"
            placeholder="Apellido"
            [class.error]="registerForm.get('apellido')?.invalid && registerForm.get('apellido')?.touched"
          />
          <div class="error-message" *ngIf="registerForm.get('apellido')?.invalid && registerForm.get('apellido')?.touched">
            El apellido es requerido
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="tipo_documento">Tipo de Documento *</label>
          <select
            id="tipo_documento"
            formControlName="tipo_documento"
            [class.error]="registerForm.get('tipo_documento')?.invalid && registerForm.get('tipo_documento')?.touched"
          >
            <option *ngFor="let tipo of tiposDocumento" [value]="tipo">{{ tipo }}</option>
          </select>
        </div>

        <div class="form-group">
          <label for="nro_documento">Nro. Documento *</label>
          <input
            type="text"
            id="nro_documento"
            formControlName="nro_documento"
            placeholder="12345678"
            [class.error]="registerForm.get('nro_documento')?.invalid && registerForm.get('nro_documento')?.touched"
          />
          <div class="error-message" *ngIf="registerForm.get('nro_documento')?.invalid && registerForm.get('nro_documento')?.touched">
            El número de documento es requerido
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="fecha_nacimiento">Fecha de Nacimiento *</label>
          <input
            type="date"
            id="fecha_nacimiento"
            formControlName="fecha_nacimiento"
            [class.error]="registerForm.get('fecha_nacimiento')?.invalid && registerForm.get('fecha_nacimiento')?.touched"
          />
          <div class="error-message" *ngIf="registerForm.get('fecha_nacimiento')?.invalid && registerForm.get('fecha_nacimiento')?.touched">
            La fecha de nacimiento es requerida
          </div>
        </div>

        <div class="form-group">
          <label for="genero">Género *</label>
          <select
            id="genero"
            formControlName="genero"
            [class.error]="registerForm.get('genero')?.invalid && registerForm.get('genero')?.touched"
          >
            <option value="">Seleccione...</option>
            <option *ngFor="let genero of generos" [value]="genero.value">{{ genero.label }}</option>
          </select>
          <div class="error-message" *ngIf="registerForm.get('genero')?.invalid && registerForm.get('genero')?.touched">
            El género es requerido
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="telefono">Teléfono (opcional)</label>
        <input
          type="tel"
          id="telefono"
          formControlName="telefono"
          placeholder="+54 11 1234-5678"
        />
      </div>

      <div class="error-message" *ngIf="error">
        {{ error }}
      </div>

      <button type="submit" class="btn-primary" [disabled]="loading || registerForm.invalid">
        {{ loading ? 'Registrando...' : 'Registrarse' }}
      </button>
    </form>

    <div class="login-link">
      <p>¿Ya tiene una cuenta? <a routerLink="/login">Iniciar sesión</a></p>
    </div>
  </div>
</div>
